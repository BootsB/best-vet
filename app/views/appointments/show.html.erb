<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card">
        <div class="card-header">
          <%= link_to appointments_path, class: "btn btn-primary" do %>
            <i class="fas fa-arrow-left"></i>
          <% end %>
        </div>
        <div class="card-body" style="overflow-y: auto; max-height: 500px;">
          <div class="row">
            <div class="col-md-12">
              <h1 class="text-center"><i class="fas fa-paw"></i> Consultation for <%= @appointment.pet_profile.name %></h1>
              <br>
              <p><i class="fas fa-hashtag"></i> Reference ID: <%= @appointment.id %></p>
              <p><%= content_tag :i, "", class: "fa-solid fa-calendar" %> <%= @appointment.appointment_date.strftime("%B %d, %Y") %></p>
              <p><strong><%= content_tag :i, "", class: "fa-solid fa-clock" %> </strong> <%= @appointment.appointment_time.strftime("%I:%M %p") %></p>
              <% icon_class = case @appointment.status.to_sym
                when :pending
                  "fa-solid fa-clock" # Default black
                when :accepted
                  "fa-solid fa-check-circle text-success" # Green
                when :declined
                  "fa-solid fa-times-circle text-danger" # Red
                when :confirmed
                  "fa-solid fa-check-double" # Confirmed icon
                else
                  "fa-solid fa-question-circle" # Default if status is not recognized
              end %>

              <p><strong><%= content_tag :i, "", class: icon_class %></strong> <%= @appointment.status.capitalize %></p>
            </div>

            <div class="col-md-12">
              <% full_name = full_name(@appointment) %>
              <% if current_user.vet? && @appointment.accepted? %>
                <p><strong>Pet Owner:</strong> <%= full_name %></p>
                <p><strong>Pet Name:</strong> <%= @appointment.pet_profile.name %></p>
              <% else %>
                <p><%= content_tag :i, "", class: "fa-solid fa-user-doctor" %> <%= full_name %></p>
                  <%= link_to "#", id: "license-toggle", title: "Click to see licence", style: "text-decoration: none;" do %>
                    <i class="fas fa-eye"></i> See Vet Licence Number
                  <% end %>
                </p>
                <p id="license-details" style="display: none;">
                  <%= @appointment.licence_number %>
                </p>
              <% end %>
              <p><strong>What happened to the Pet?</strong></p>
              <p><%= @appointment.description_of_problem %></p>
            </div> <!-- Closing col-md-12 -->
          </div> <!-- Closing row -->
        </div> <!-- Closing card-body -->
        <% if current_user.vet? %>
          <div class="card-footer">
            <%= link_to appointment_path(@appointment), method: :delete, data: { confirm: 'Are you sure you want to delete this appointment?' }, class: "btn btn-danger" do %>
              <i class="fas fa-trash"></i> Delete
            <% end %>
          </div>
        <% end %>
      </div> <!-- Closing card -->
    </div> <!-- Closing col-md-8 -->
  </div> <!-- Closing row justify-content-center -->
</div> <!-- Closing container -->
